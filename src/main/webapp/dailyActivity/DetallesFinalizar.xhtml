<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core">
    <div class="modal fade" id="modalDetallesFinalizar" tabindex="-1" role="dialog"
         aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable" role="document">
            <h:panelGroup layout="block" styleClass="modal-content br-none" id="pnlDetallesFinalizar">
                <div class="modal-header bg-dark br-none">
                    <h5 class="modal-title text-warning" id="exampleModalCenterTitle">
                        <h:outputText value="EQ#{ADController.operacionSelected.placa.numerounidad} | AB#{ADController.operacionSelected.placa.placa}"/>
                    </h5>
                    <button type="button" class="close text-warning" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="row" style="height: 81px; overflow: hidden;">
                        <div class="col-md-3">
                            <a class="btn btn-app" href="#containerNotas">
                                <span class="badge bg-warning">3</span>
                                <i class="fas fa-bullhorn"></i> Notas
                            </a>
                        </div>
                        <div class="col-md-9">
                            <div class="row">
                                <div class="col-6">
                                    <div class="justify-content-between align-items-center border-bottom mb-3">
                                        <p class="flex-column text-right">
                                            <small class="font-weight-bold">
                                                <i class="fas fa-cash-register"></i> 
                                                <h:outputText value=" #{ADController.operacionSelected.idconductor.nombres} #{ADController.operacionSelected.idconductor.apellidos}"/>
                                            </small><br/>
                                            <span class="text-muted">Motorista</span>
                                        </p>
                                    </div>
                                </div>
                                <div class="col-6">
                                    <div class="justify-content-between align-items-center border-bottom mb-3">
                                        <p class="flex-column text-right">
                                            <small class="font-weight-bold">
                                                <i class="fas fa-cash-register"></i> 
                                                <h:outputText rendered="#{!(empty ADController.operacionSelected.idauxiliar)}"
                                                              value=" #{ADController.operacionSelected.idauxiliar.nombres} #{ADController.operacionSelected.idauxiliar.apellidos}"/>
                                                <h:outputText rendered=" #{empty ADController.operacionSelected.idauxiliar}"
                                                              value="--No Asignado--"/>
                                            </small><br/>
                                            <span class="text-muted">Auxiliar</span>
                                        </p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <h:form styleClass="input-group mb-3"
                            >
                        <div class="input-group-prepend">
                            <p:commandButton styleClass="btn btn-secondary"
                                             actionListener="#{ADController.calcularDetalles}"
                                             update="pnlDetallesFinalizar"
                                             value="Calcular"/>
                        </div>
                        <h:inputText styleClass="form-control" 
                                     value="#{ADController.detallesSelected.conteoActual}"
                                     a:placeholder="Ingrese contador actual"/>
                    </h:form>
                    <div>
                        <table class="table table-bordered th-custom3">
                            <thead>
                                <tr>
                                    <th style="width: 10px">#</th>
                                    <th>Descripcion</th>
                                    <th>Valor</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr>
                                    <td>1.</td>
                                    <td>Viajes Realizados</td>
                                    <td>
                                        <span class="d-block text-center text-muted">
                                            <h:outputText value="#{ADController.detallesSelected.viajesRealizados}/11"/>
                                        </span>
                                    </td>
                                </tr>                                
                                <tr>
                                    <td>2.</td>
                                    <td>Conteo Ingresado</td>
                                    <td>
                                        <span class="d-block text-center text-muted">
                                            <h:outputText value="--No Establecido--"
                                                          rendered="#{ADController.detallesSelected.conteoActual == 0}"/>

                                            <h:outputText rendered="#{ADController.detallesSelected.conteoActual > 0}"
                                                          value="#{ADController.detallesSelected.conteoActual}"/>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>3.</td>
                                    <td>Conteo Anterior</td>
                                    <td>
                                        <span class="d-block text-center text-muted">
                                            <h:outputText value="#{ADController.detallesSelected.conteoAnterior}"/>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>4.</td>
                                    <td>Diferencia Calculada <span class="badge bg-warning">Nuevo</span></td>
                                    <td>
                                        <span class="d-block text-center text-muted">
                                            <h:outputText value="#{ADController.detallesSelected.diferencia}"/>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>5.</td>
                                    <td>Ingreso Total Calculado</td>
                                    <td>
                                        <span class="d-block text-center text-muted">
                                            <h:outputText value="$ #{ADController.detallesSelected.ingresoCalculado}"/>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>6.</td>
                                    <td>Total anticipos <span class="badge bg-success">Nuevo</span></td>
                                    <td>
                                        <span class="d-block text-center text-muted">
                                            <h:outputText value="$ #{ADController.detallesSelected.anticipos}"/>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>7.</td>
                                    <td>Pago Motorista</td>
                                    <td>
                                        <span class="d-block text-center text-muted">
                                            <h:outputText value="$ #{ADController.detallesSelected.pagoMotorista}"/>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>8.</td>
                                    <td>Descuento ahorro motorista </td>
                                    <td>
                                        <span class="d-block text-center text-muted">
                                            <h:outputText value="$ #{ADController.detallesSelected.descuentoMotorista}"/>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>9.</td>
                                    <td>Pago Auxiliar</td>
                                    <td>
                                        <span class="d-block text-center text-muted">
                                            <h:outputText value="$ #{ADController.detallesSelected.pagoAuxiliar}"/>
                                        </span>
                                    </td>
                                </tr>
                                <tr>
                                    <td>10.</td>
                                    <td>Descuento ahorro auxiliar</td>
                                    <td>
                                        <span class="d-block text-center text-muted">
                                            <h:outputText value="$ #{ADController.detallesSelected.descuentoAuxiliar}"/>
                                        </span>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                        <div>
                            <h5 class="d-block text-muted text-center p-0 bg-dark">Notas</h5>
                            <div class="p-md-2 border rounded mb-1">
                                <p class="m-0">Los datos calculados no coinciden con los datos de los montos entregados</p>
                            </div>
                            <div class="form-group mb-1">
                                <textarea class="form-control" rows="2" placeholder="Ingrese contenido nota ..."></textarea>
                            </div>                            
                        </div>
                        <div id="containerNotas">
                            <a href="#" class="d-block text-muted text-center"><u>+Nueva Nota</u></a>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    
                    <a href="#" class="btn-ct btn-ct-secondary" data-dismiss="modal">Cerrar</a>
                    <p:commandLink styleClass="btn-ct btn-ct-success"
                                   actionListener="#{ADController.finalizarOperacion}"
                                   update=":listActivities, :pnlMessageJSF"
                                   rendered="#{!(empty ADController.detallesSelected.conteoActual) and (ADController.operacionSelected.estado == 1)}"
                                   value="#{bundle.EndProcess}"/>
                </div>
            </h:panelGroup>
        </div>
    </div>                    
</ui:composition>